{"ast":null,"code":"var _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport { Record, List, Map, fromJS } from 'immutable';\nimport { MODE_IDLE } from './constants';\nimport { SNAP_MASK } from './utils/snap';\n\nvar safeLoadMapList = function safeLoadMapList(mapList, Model, defaultMap) {\n  return mapList ? new Map(mapList).map(function (m) {\n    return new Model(m);\n  }).toMap() : defaultMap || new Map();\n};\n\nexport var Grid = function (_Record) {\n  _inherits(Grid, _Record);\n\n  function Grid() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Grid);\n\n    return _possibleConstructorReturn(this, (Grid.__proto__ || Object.getPrototypeOf(Grid)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {})\n    })));\n  }\n\n  return Grid;\n}(Record({\n  id: '',\n  type: '',\n  properties: Map()\n}, 'Grid'));\nexport var DefaultGrids = new Map({\n  'h1': new Grid({\n    id: 'h1',\n    type: 'horizontal-streak',\n    properties: {\n      step: 20,\n      colors: ['#808080', '#ddd', '#ddd', '#ddd', '#ddd']\n    }\n  }),\n  'v1': new Grid({\n    id: 'v1',\n    type: 'vertical-streak',\n    properties: {\n      step: 20,\n      colors: ['#808080', '#ddd', '#ddd', '#ddd', '#ddd']\n    }\n  })\n});\nexport var ElementsSet = function (_Record2) {\n  _inherits(ElementsSet, _Record2);\n\n  function ElementsSet() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ElementsSet);\n\n    return _possibleConstructorReturn(this, (ElementsSet.__proto__ || Object.getPrototypeOf(ElementsSet)).call(this, {\n      vertices: new List(json.vertices || []),\n      lines: new List(json.lines || []),\n      holes: new List(json.holes || []),\n      areas: new List(json.areas || []),\n      items: new List(json.items || [])\n    }));\n  }\n\n  return ElementsSet;\n}(Record({\n  vertices: new List(),\n  lines: new List(),\n  holes: new List(),\n  areas: new List(),\n  items: new List()\n}, 'ElementsSet'));\nvar sharedAttributes = {\n  id: '',\n  type: '',\n  prototype: '',\n  name: '',\n  misc: new Map(),\n  selected: false,\n  properties: new Map(),\n  visible: true\n};\nexport var Vertex = function (_Record3) {\n  _inherits(Vertex, _Record3);\n\n  function Vertex() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Vertex);\n\n    return _possibleConstructorReturn(this, (Vertex.__proto__ || Object.getPrototypeOf(Vertex)).call(this, _extends({}, json, {\n      lines: new List(json.lines || []),\n      areas: new List(json.areas || [])\n    })));\n  }\n\n  return Vertex;\n}(Record(_extends({}, sharedAttributes, {\n  x: -1,\n  y: -1,\n  prototype: 'vertices',\n  lines: new List(),\n  areas: new List()\n}), 'Vertex'));\nexport var Line = function (_Record4) {\n  _inherits(Line, _Record4);\n\n  function Line() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Line);\n\n    return _possibleConstructorReturn(this, (Line.__proto__ || Object.getPrototypeOf(Line)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {}),\n      vertices: new List(json.vertices || []),\n      holes: new List(json.holes || [])\n    })));\n  }\n\n  return Line;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'lines',\n  vertices: new List(),\n  holes: new List()\n}), 'Line'));\nexport var Hole = function (_Record5) {\n  _inherits(Hole, _Record5);\n\n  function Hole() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Hole);\n\n    return _possibleConstructorReturn(this, (Hole.__proto__ || Object.getPrototypeOf(Hole)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {})\n    })));\n  }\n\n  return Hole;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'holes',\n  offset: -1,\n  line: ''\n}), 'Hole'));\nexport var Area = function (_Record6) {\n  _inherits(Area, _Record6);\n\n  function Area() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Area);\n\n    return _possibleConstructorReturn(this, (Area.__proto__ || Object.getPrototypeOf(Area)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {}),\n      vertices: new List(json.vertices || [])\n    })));\n  }\n\n  return Area;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'areas',\n  vertices: new List(),\n  holes: new List()\n}), 'Area'));\nexport var Item = function (_Record7) {\n  _inherits(Item, _Record7);\n\n  function Item() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Item);\n\n    return _possibleConstructorReturn(this, (Item.__proto__ || Object.getPrototypeOf(Item)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {})\n    })));\n  }\n\n  return Item;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'items',\n  x: 0,\n  y: 0,\n  rotation: 0\n}), 'Item'));\nexport var Layer = function (_Record8) {\n  _inherits(Layer, _Record8);\n\n  function Layer() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Layer);\n\n    return _possibleConstructorReturn(this, (Layer.__proto__ || Object.getPrototypeOf(Layer)).call(this, _extends({}, json, {\n      vertices: safeLoadMapList(json.vertices, Vertex),\n      lines: safeLoadMapList(json.lines, Line),\n      holes: safeLoadMapList(json.holes, Hole),\n      areas: safeLoadMapList(json.areas, Area),\n      items: safeLoadMapList(json.items, Item),\n      selected: new ElementsSet(json.selected)\n    })));\n  }\n\n  return Layer;\n}(Record({\n  id: '',\n  altitude: 0,\n  order: 0,\n  opacity: 1,\n  name: '',\n  visible: true,\n  vertices: new Map(),\n  lines: new Map(),\n  holes: new Map(),\n  areas: new Map(),\n  items: new Map(),\n  selected: new ElementsSet()\n}, 'Layer'));\nexport var Group = function (_Record9) {\n  _inherits(Group, _Record9);\n\n  function Group() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Group);\n\n    return _possibleConstructorReturn(this, (Group.__proto__ || Object.getPrototypeOf(Group)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {}),\n      elements: fromJS(json.elements || {})\n    })));\n  }\n\n  return Group;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'groups',\n  x: 0,\n  y: 0,\n  rotation: 0,\n  elements: new Map()\n}), 'Group'));\nexport var DefaultLayers = new Map({\n  'layer-1': new Layer({\n    id: 'layer-1',\n    name: 'default'\n  })\n});\nexport var Scene = function (_Record10) {\n  _inherits(Scene, _Record10);\n\n  function Scene() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Scene);\n\n    var layers = safeLoadMapList(json.layers, Layer, DefaultLayers);\n    return _possibleConstructorReturn(this, (Scene.__proto__ || Object.getPrototypeOf(Scene)).call(this, _extends({}, json, {\n      grids: safeLoadMapList(json.grids, Grid, DefaultGrids),\n      layers: layers,\n      selectedLayer: layers.first().id,\n      groups: safeLoadMapList(json.groups || {}, Group),\n      meta: json.meta ? fromJS(json.meta) : new Map(),\n      guides: json.guides ? fromJS(json.guides) : new Map({\n        horizontal: new Map(),\n        vertical: new Map(),\n        circular: new Map()\n      })\n    })));\n  }\n\n  return Scene;\n}(Record({\n  unit: 'cm',\n  layers: new Map(),\n  grids: new Map(),\n  selectedLayer: null,\n  groups: new Map(),\n  width: 3000,\n  height: 2000,\n  meta: new Map(),\n  //additional info\n  guides: new Map()\n}, 'Scene'));\nexport var CatalogElement = function (_Record11) {\n  _inherits(CatalogElement, _Record11);\n\n  function CatalogElement() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, CatalogElement);\n\n    return _possibleConstructorReturn(this, (CatalogElement.__proto__ || Object.getPrototypeOf(CatalogElement)).call(this, _extends({}, json, {\n      info: fromJS(json.info),\n      properties: fromJS(json.properties)\n    })));\n  }\n\n  return CatalogElement;\n}(Record({\n  name: '',\n  prototype: '',\n  info: new Map(),\n  properties: new Map()\n}, 'CatalogElement'));\nexport var Catalog = function (_Record12) {\n  _inherits(Catalog, _Record12);\n\n  function Catalog() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Catalog);\n\n    var elements = safeLoadMapList(json.elements, CatalogElement);\n    return _possibleConstructorReturn(this, (Catalog.__proto__ || Object.getPrototypeOf(Catalog)).call(this, {\n      elements: elements,\n      ready: !elements.isEmpty()\n    }));\n  }\n\n  _createClass(Catalog, [{\n    key: 'factoryElement',\n    value: function factoryElement(type, options, initialProperties) {\n      if (!this.elements.has(type)) {\n        var catList = this.elements.map(function (element) {\n          return element.name;\n        }).toArray();\n        throw new Error('Element ' + type + ' does not exist in catalog ' + catList);\n      }\n\n      var element = this.elements.get(type);\n      var properties = element.properties.map(function (value, key) {\n        return initialProperties && initialProperties.has(key) ? initialProperties.get(key) : value.get('defaultValue');\n      });\n\n      switch (element.prototype) {\n        case 'lines':\n          return new Line(options).merge({\n            properties: properties\n          });\n\n        case 'holes':\n          return new Hole(options).merge({\n            properties: properties\n          });\n\n        case 'areas':\n          return new Area(options).merge({\n            properties: properties\n          });\n\n        case 'items':\n          return new Item(options).merge({\n            properties: properties\n          });\n\n        default:\n          throw new Error('prototype not valid');\n      }\n    }\n  }]);\n\n  return Catalog;\n}(Record({\n  ready: false,\n  page: 'root',\n  path: new List(),\n  elements: new Map()\n}, 'Catalog'));\nexport var HistoryStructure = function (_Record13) {\n  _inherits(HistoryStructure, _Record13);\n\n  function HistoryStructure() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, HistoryStructure);\n\n    return _possibleConstructorReturn(this, (HistoryStructure.__proto__ || Object.getPrototypeOf(HistoryStructure)).call(this, {\n      list: fromJS(json.list || []),\n      first: new Scene(json.scene),\n      last: new Scene(json.last || json.scene)\n    }));\n  }\n\n  return HistoryStructure;\n}(Record({\n  list: new List(),\n  first: null,\n  last: null\n}, 'HistoryStructure'));\nexport var State = function (_Record14) {\n  _inherits(State, _Record14);\n\n  function State() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, State);\n\n    return _possibleConstructorReturn(this, (State.__proto__ || Object.getPrototypeOf(State)).call(this, _extends({}, json, {\n      scene: new Scene(json.scene),\n      sceneHistory: new HistoryStructure(json),\n      catalog: new Catalog(json.catalog || {}),\n      viewer2D: new Map(json.viewer2D || {}),\n      drawingSupport: new Map(json.drawingSupport || {}),\n      draggingSupport: new Map(json.draggingSupport || {}),\n      rotatingSupport: new Map(json.rotatingSupport || {}),\n      misc: json.misc ? fromJS(json.misc) : new Map()\n    })));\n  }\n\n  return State;\n}(Record({\n  mode: MODE_IDLE,\n  scene: new Scene(),\n  sceneHistory: new HistoryStructure(),\n  catalog: new Catalog(),\n  viewer2D: new Map(),\n  mouse: new Map({\n    x: 0,\n    y: 0\n  }),\n  zoom: 0,\n  snapMask: SNAP_MASK,\n  snapElements: new List(),\n  activeSnapElement: null,\n  drawingSupport: new Map(),\n  draggingSupport: new Map(),\n  rotatingSupport: new Map(),\n  errors: new List(),\n  warnings: new List(),\n  clipboardProperties: new Map(),\n  selectedElementsHistory: new List(),\n  misc: new Map(),\n  //additional info\n  alterate: false\n}, 'State'));","map":{"version":3,"sources":["/home/srihari/Desktop/Sparkplug_PandemicSparks/grid/node_modules/react-planner/es/models.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","Record","List","Map","fromJS","MODE_IDLE","SNAP_MASK","safeLoadMapList","mapList","Model","defaultMap","map","m","toMap","Grid","_Record","json","undefined","getPrototypeOf","properties","id","type","DefaultGrids","step","colors","ElementsSet","_Record2","vertices","lines","holes","areas","items","sharedAttributes","name","misc","selected","visible","Vertex","_Record3","x","y","Line","_Record4","Hole","_Record5","offset","line","Area","_Record6","Item","_Record7","rotation","Layer","_Record8","altitude","order","opacity","Group","_Record9","elements","DefaultLayers","Scene","_Record10","layers","grids","selectedLayer","first","groups","meta","guides","horizontal","vertical","circular","unit","width","height","CatalogElement","_Record11","info","Catalog","_Record12","ready","isEmpty","factoryElement","options","initialProperties","has","catList","element","toArray","Error","get","merge","page","path","HistoryStructure","_Record13","list","scene","last","State","_Record14","sceneHistory","catalog","viewer2D","drawingSupport","draggingSupport","rotatingSupport","mode","mouse","zoom","snapMask","snapElements","activeSnapElement","errors","warnings","clipboardProperties","selectedElementsHistory","alterate"],"mappings":"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","sourcesContent":["var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport { Record, List, Map, fromJS } from 'immutable';\nimport { MODE_IDLE } from './constants';\nimport { SNAP_MASK } from './utils/snap';\n\nvar safeLoadMapList = function safeLoadMapList(mapList, Model, defaultMap) {\n  return mapList ? new Map(mapList).map(function (m) {\n    return new Model(m);\n  }).toMap() : defaultMap || new Map();\n};\n\nexport var Grid = function (_Record) {\n  _inherits(Grid, _Record);\n\n  function Grid() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Grid);\n\n    return _possibleConstructorReturn(this, (Grid.__proto__ || Object.getPrototypeOf(Grid)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {})\n    })));\n  }\n\n  return Grid;\n}(Record({\n  id: '',\n  type: '',\n  properties: Map()\n}, 'Grid'));\n\nexport var DefaultGrids = new Map({\n  'h1': new Grid({\n    id: 'h1',\n    type: 'horizontal-streak',\n    properties: {\n      step: 20,\n      colors: ['#808080', '#ddd', '#ddd', '#ddd', '#ddd']\n    }\n  }),\n  'v1': new Grid({\n    id: 'v1',\n    type: 'vertical-streak',\n    properties: {\n      step: 20,\n      colors: ['#808080', '#ddd', '#ddd', '#ddd', '#ddd']\n    }\n  })\n});\n\nexport var ElementsSet = function (_Record2) {\n  _inherits(ElementsSet, _Record2);\n\n  function ElementsSet() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ElementsSet);\n\n    return _possibleConstructorReturn(this, (ElementsSet.__proto__ || Object.getPrototypeOf(ElementsSet)).call(this, {\n      vertices: new List(json.vertices || []),\n      lines: new List(json.lines || []),\n      holes: new List(json.holes || []),\n      areas: new List(json.areas || []),\n      items: new List(json.items || [])\n    }));\n  }\n\n  return ElementsSet;\n}(Record({\n  vertices: new List(),\n  lines: new List(),\n  holes: new List(),\n  areas: new List(),\n  items: new List()\n}, 'ElementsSet'));\n\nvar sharedAttributes = {\n  id: '',\n  type: '',\n  prototype: '',\n  name: '',\n  misc: new Map(),\n  selected: false,\n  properties: new Map(),\n  visible: true\n};\n\nexport var Vertex = function (_Record3) {\n  _inherits(Vertex, _Record3);\n\n  function Vertex() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Vertex);\n\n    return _possibleConstructorReturn(this, (Vertex.__proto__ || Object.getPrototypeOf(Vertex)).call(this, _extends({}, json, {\n      lines: new List(json.lines || []),\n      areas: new List(json.areas || [])\n    })));\n  }\n\n  return Vertex;\n}(Record(_extends({}, sharedAttributes, {\n  x: -1,\n  y: -1,\n  prototype: 'vertices',\n  lines: new List(),\n  areas: new List()\n}), 'Vertex'));\n\nexport var Line = function (_Record4) {\n  _inherits(Line, _Record4);\n\n  function Line() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Line);\n\n    return _possibleConstructorReturn(this, (Line.__proto__ || Object.getPrototypeOf(Line)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {}),\n      vertices: new List(json.vertices || []),\n      holes: new List(json.holes || [])\n    })));\n  }\n\n  return Line;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'lines',\n  vertices: new List(),\n  holes: new List()\n}), 'Line'));\n\nexport var Hole = function (_Record5) {\n  _inherits(Hole, _Record5);\n\n  function Hole() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Hole);\n\n    return _possibleConstructorReturn(this, (Hole.__proto__ || Object.getPrototypeOf(Hole)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {})\n    })));\n  }\n\n  return Hole;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'holes',\n  offset: -1,\n  line: ''\n}), 'Hole'));\n\nexport var Area = function (_Record6) {\n  _inherits(Area, _Record6);\n\n  function Area() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Area);\n\n    return _possibleConstructorReturn(this, (Area.__proto__ || Object.getPrototypeOf(Area)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {}),\n      vertices: new List(json.vertices || [])\n    })));\n  }\n\n  return Area;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'areas',\n  vertices: new List(),\n  holes: new List()\n}), 'Area'));\n\nexport var Item = function (_Record7) {\n  _inherits(Item, _Record7);\n\n  function Item() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Item);\n\n    return _possibleConstructorReturn(this, (Item.__proto__ || Object.getPrototypeOf(Item)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {})\n    })));\n  }\n\n  return Item;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'items',\n  x: 0,\n  y: 0,\n  rotation: 0\n}), 'Item'));\n\nexport var Layer = function (_Record8) {\n  _inherits(Layer, _Record8);\n\n  function Layer() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Layer);\n\n    return _possibleConstructorReturn(this, (Layer.__proto__ || Object.getPrototypeOf(Layer)).call(this, _extends({}, json, {\n      vertices: safeLoadMapList(json.vertices, Vertex),\n      lines: safeLoadMapList(json.lines, Line),\n      holes: safeLoadMapList(json.holes, Hole),\n      areas: safeLoadMapList(json.areas, Area),\n      items: safeLoadMapList(json.items, Item),\n      selected: new ElementsSet(json.selected)\n    })));\n  }\n\n  return Layer;\n}(Record({\n  id: '',\n  altitude: 0,\n  order: 0,\n  opacity: 1,\n  name: '',\n  visible: true,\n  vertices: new Map(),\n  lines: new Map(),\n  holes: new Map(),\n  areas: new Map(),\n  items: new Map(),\n  selected: new ElementsSet()\n}, 'Layer'));\n\nexport var Group = function (_Record9) {\n  _inherits(Group, _Record9);\n\n  function Group() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Group);\n\n    return _possibleConstructorReturn(this, (Group.__proto__ || Object.getPrototypeOf(Group)).call(this, _extends({}, json, {\n      properties: fromJS(json.properties || {}),\n      elements: fromJS(json.elements || {})\n    })));\n  }\n\n  return Group;\n}(Record(_extends({}, sharedAttributes, {\n  prototype: 'groups',\n  x: 0,\n  y: 0,\n  rotation: 0,\n  elements: new Map()\n}), 'Group'));\n\nexport var DefaultLayers = new Map({\n  'layer-1': new Layer({ id: 'layer-1', name: 'default' })\n});\n\nexport var Scene = function (_Record10) {\n  _inherits(Scene, _Record10);\n\n  function Scene() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Scene);\n\n    var layers = safeLoadMapList(json.layers, Layer, DefaultLayers);\n    return _possibleConstructorReturn(this, (Scene.__proto__ || Object.getPrototypeOf(Scene)).call(this, _extends({}, json, {\n      grids: safeLoadMapList(json.grids, Grid, DefaultGrids),\n      layers: layers,\n      selectedLayer: layers.first().id,\n      groups: safeLoadMapList(json.groups || {}, Group),\n      meta: json.meta ? fromJS(json.meta) : new Map(),\n      guides: json.guides ? fromJS(json.guides) : new Map({ horizontal: new Map(), vertical: new Map(), circular: new Map() })\n    })));\n  }\n\n  return Scene;\n}(Record({\n  unit: 'cm',\n  layers: new Map(),\n  grids: new Map(),\n  selectedLayer: null,\n  groups: new Map(),\n  width: 3000,\n  height: 2000,\n  meta: new Map(), //additional info\n  guides: new Map()\n}, 'Scene'));\n\nexport var CatalogElement = function (_Record11) {\n  _inherits(CatalogElement, _Record11);\n\n  function CatalogElement() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, CatalogElement);\n\n    return _possibleConstructorReturn(this, (CatalogElement.__proto__ || Object.getPrototypeOf(CatalogElement)).call(this, _extends({}, json, {\n      info: fromJS(json.info),\n      properties: fromJS(json.properties)\n    })));\n  }\n\n  return CatalogElement;\n}(Record({\n  name: '',\n  prototype: '',\n  info: new Map(),\n  properties: new Map()\n}, 'CatalogElement'));\n\nexport var Catalog = function (_Record12) {\n  _inherits(Catalog, _Record12);\n\n  function Catalog() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Catalog);\n\n    var elements = safeLoadMapList(json.elements, CatalogElement);\n    return _possibleConstructorReturn(this, (Catalog.__proto__ || Object.getPrototypeOf(Catalog)).call(this, {\n      elements: elements,\n      ready: !elements.isEmpty()\n    }));\n  }\n\n  _createClass(Catalog, [{\n    key: 'factoryElement',\n    value: function factoryElement(type, options, initialProperties) {\n      if (!this.elements.has(type)) {\n        var catList = this.elements.map(function (element) {\n          return element.name;\n        }).toArray();\n        throw new Error('Element ' + type + ' does not exist in catalog ' + catList);\n      }\n\n      var element = this.elements.get(type);\n      var properties = element.properties.map(function (value, key) {\n        return initialProperties && initialProperties.has(key) ? initialProperties.get(key) : value.get('defaultValue');\n      });\n\n      switch (element.prototype) {\n        case 'lines':\n          return new Line(options).merge({ properties: properties });\n\n        case 'holes':\n          return new Hole(options).merge({ properties: properties });\n\n        case 'areas':\n          return new Area(options).merge({ properties: properties });\n\n        case 'items':\n          return new Item(options).merge({ properties: properties });\n\n        default:\n          throw new Error('prototype not valid');\n      }\n    }\n  }]);\n\n  return Catalog;\n}(Record({\n  ready: false,\n  page: 'root',\n  path: new List(),\n  elements: new Map()\n}, 'Catalog'));\n\nexport var HistoryStructure = function (_Record13) {\n  _inherits(HistoryStructure, _Record13);\n\n  function HistoryStructure() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, HistoryStructure);\n\n    return _possibleConstructorReturn(this, (HistoryStructure.__proto__ || Object.getPrototypeOf(HistoryStructure)).call(this, {\n      list: fromJS(json.list || []),\n      first: new Scene(json.scene),\n      last: new Scene(json.last || json.scene)\n    }));\n  }\n\n  return HistoryStructure;\n}(Record({\n  list: new List(),\n  first: null,\n  last: null\n}, 'HistoryStructure'));\n\nexport var State = function (_Record14) {\n  _inherits(State, _Record14);\n\n  function State() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, State);\n\n    return _possibleConstructorReturn(this, (State.__proto__ || Object.getPrototypeOf(State)).call(this, _extends({}, json, {\n      scene: new Scene(json.scene),\n      sceneHistory: new HistoryStructure(json),\n      catalog: new Catalog(json.catalog || {}),\n      viewer2D: new Map(json.viewer2D || {}),\n      drawingSupport: new Map(json.drawingSupport || {}),\n      draggingSupport: new Map(json.draggingSupport || {}),\n      rotatingSupport: new Map(json.rotatingSupport || {}),\n      misc: json.misc ? fromJS(json.misc) : new Map()\n    })));\n  }\n\n  return State;\n}(Record({\n  mode: MODE_IDLE,\n  scene: new Scene(),\n  sceneHistory: new HistoryStructure(),\n  catalog: new Catalog(),\n  viewer2D: new Map(),\n  mouse: new Map({ x: 0, y: 0 }),\n  zoom: 0,\n  snapMask: SNAP_MASK,\n  snapElements: new List(),\n  activeSnapElement: null,\n  drawingSupport: new Map(),\n  draggingSupport: new Map(),\n  rotatingSupport: new Map(),\n  errors: new List(),\n  warnings: new List(),\n  clipboardProperties: new Map(),\n  selectedElementsHistory: new List(),\n  misc: new Map(), //additional info\n  alterate: false\n}, 'State'));"]},"metadata":{},"sourceType":"module"}