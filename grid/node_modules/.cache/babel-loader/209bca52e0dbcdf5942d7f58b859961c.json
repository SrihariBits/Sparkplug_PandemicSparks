{"ast":null,"code":"import { Map } from 'immutable';\nimport diff from 'immutablediff';\nimport patch from 'immutablepatch';\nexport var historyPush = function historyPush(historyStructure, item) {\n  if (historyStructure.last) {\n    if (historyStructure.last.hashCode() !== item.hashCode()) {\n      var toPush = new Map({\n        time: Date.now(),\n        diff: diff(historyStructure.last, item)\n      });\n      historyStructure = historyStructure.set('last', item).set('list', historyStructure.list.push(toPush));\n    }\n  } else {\n    historyStructure = historyStructure.set('last', item);\n  }\n\n  return historyStructure;\n};\nexport var historyPop = function historyPop(historyStructure) {\n  if (historyStructure.last) {\n    if (historyStructure.list.size) {\n      var last = historyStructure.first;\n\n      for (var x = 0; x < historyStructure.list.size - 1; x++) {\n        last = patch(last, historyStructure.list.get(x).get('diff'));\n      }\n\n      historyStructure = historyStructure.set('last', last).set('list', historyStructure.list.pop());\n    }\n  }\n\n  return historyStructure;\n};","map":{"version":3,"sources":["/home/srihari/Desktop/Sparkplug_PandemicSparks/grid/node_modules/react-planner/es/utils/history.js"],"names":["Map","diff","patch","historyPush","historyStructure","item","last","hashCode","toPush","time","Date","now","set","list","push","historyPop","size","first","x","get","pop"],"mappings":"AAAA,SAASA,GAAT,QAAoB,WAApB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AAEA,OAAO,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBC,gBAArB,EAAuCC,IAAvC,EAA6C;AACpE,MAAID,gBAAgB,CAACE,IAArB,EAA2B;AACzB,QAAIF,gBAAgB,CAACE,IAAjB,CAAsBC,QAAtB,OAAqCF,IAAI,CAACE,QAAL,EAAzC,EAA0D;AACxD,UAAIC,MAAM,GAAG,IAAIR,GAAJ,CAAQ;AACnBS,QAAAA,IAAI,EAAEC,IAAI,CAACC,GAAL,EADa;AAEnBV,QAAAA,IAAI,EAAEA,IAAI,CAACG,gBAAgB,CAACE,IAAlB,EAAwBD,IAAxB;AAFS,OAAR,CAAb;AAKAD,MAAAA,gBAAgB,GAAGA,gBAAgB,CAACQ,GAAjB,CAAqB,MAArB,EAA6BP,IAA7B,EAAmCO,GAAnC,CAAuC,MAAvC,EAA+CR,gBAAgB,CAACS,IAAjB,CAAsBC,IAAtB,CAA2BN,MAA3B,CAA/C,CAAnB;AACD;AACF,GATD,MASO;AACLJ,IAAAA,gBAAgB,GAAGA,gBAAgB,CAACQ,GAAjB,CAAqB,MAArB,EAA6BP,IAA7B,CAAnB;AACD;;AACD,SAAOD,gBAAP;AACD,CAdM;AAgBP,OAAO,IAAIW,UAAU,GAAG,SAASA,UAAT,CAAoBX,gBAApB,EAAsC;AAC5D,MAAIA,gBAAgB,CAACE,IAArB,EAA2B;AACzB,QAAIF,gBAAgB,CAACS,IAAjB,CAAsBG,IAA1B,EAAgC;AAC9B,UAAIV,IAAI,GAAGF,gBAAgB,CAACa,KAA5B;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,gBAAgB,CAACS,IAAjB,CAAsBG,IAAtB,GAA6B,CAAjD,EAAoDE,CAAC,EAArD,EAAyD;AACvDZ,QAAAA,IAAI,GAAGJ,KAAK,CAACI,IAAD,EAAOF,gBAAgB,CAACS,IAAjB,CAAsBM,GAAtB,CAA0BD,CAA1B,EAA6BC,GAA7B,CAAiC,MAAjC,CAAP,CAAZ;AACD;;AAEDf,MAAAA,gBAAgB,GAAGA,gBAAgB,CAACQ,GAAjB,CAAqB,MAArB,EAA6BN,IAA7B,EAAmCM,GAAnC,CAAuC,MAAvC,EAA+CR,gBAAgB,CAACS,IAAjB,CAAsBO,GAAtB,EAA/C,CAAnB;AACD;AACF;;AACD,SAAOhB,gBAAP;AACD,CAZM","sourcesContent":["import { Map } from 'immutable';\nimport diff from 'immutablediff';\nimport patch from 'immutablepatch';\n\nexport var historyPush = function historyPush(historyStructure, item) {\n  if (historyStructure.last) {\n    if (historyStructure.last.hashCode() !== item.hashCode()) {\n      var toPush = new Map({\n        time: Date.now(),\n        diff: diff(historyStructure.last, item)\n      });\n\n      historyStructure = historyStructure.set('last', item).set('list', historyStructure.list.push(toPush));\n    }\n  } else {\n    historyStructure = historyStructure.set('last', item);\n  }\n  return historyStructure;\n};\n\nexport var historyPop = function historyPop(historyStructure) {\n  if (historyStructure.last) {\n    if (historyStructure.list.size) {\n      var last = historyStructure.first;\n      for (var x = 0; x < historyStructure.list.size - 1; x++) {\n        last = patch(last, historyStructure.list.get(x).get('diff'));\n      }\n\n      historyStructure = historyStructure.set('last', last).set('list', historyStructure.list.pop());\n    }\n  }\n  return historyStructure;\n};"]},"metadata":{},"sourceType":"module"}