{"ast":null,"code":"var _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport CatalogItem from './catalog-item';\nimport CatalogBreadcrumb from './catalog-breadcrumb';\nimport CatalogPageItem from './catalog-page-item';\nimport CatalogTurnBackPageItem from './catalog-turn-back-page-item';\nimport ContentContainer from '../style/content-container';\nimport ContentTitle from '../style/content-title';\nimport * as SharedStyle from '../../shared-style';\nvar containerStyle = {\n  position: 'fixed',\n  width: 'calc( 100% - 51px)',\n  height: 'calc( 100% - 20px)',\n  backgroundColor: '#FFF',\n  padding: '1em',\n  left: 50,\n  overflowY: 'auto',\n  overflowX: 'hidden',\n  zIndex: 10\n};\nvar itemsStyle = {\n  display: 'grid',\n  gridTemplateColumns: 'repeat(auto-fit, minmax(14em, 1fr))',\n  gridGap: '10px',\n  marginTop: '1em'\n};\nvar searchContainer = {\n  width: '100%',\n  height: '3em',\n  padding: '0.625em',\n  background: '#f7f7f9',\n  border: '1px solid #e1e1e8',\n  cursor: 'pointer',\n  position: 'relative',\n  boxShadow: '0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)',\n  borderRadius: '2px',\n  transition: 'all .2s ease-in-out',\n  WebkitTransition: 'all .2s ease-in-out',\n  marginBottom: '1em'\n};\nvar searchText = {\n  width: '8em',\n  display: 'inline-block'\n};\nvar searchInput = {\n  width: 'calc( 100% - 10em )',\n  height: '2em',\n  margin: '0',\n  padding: '0 1em',\n  border: '1px solid #EEE'\n};\n\nvar historyContainer = _extends({}, searchContainer, {\n  padding: '0.2em 0.625em'\n});\n\nvar historyElementStyle = {\n  width: 'auto',\n  height: '2em',\n  lineHeight: '2em',\n  textAlign: 'center',\n  borderRadius: '1em',\n  display: 'inline-block',\n  cursor: 'pointer',\n  backgroundColor: SharedStyle.PRIMARY_COLOR.alt,\n  color: SharedStyle.PRIMARY_COLOR.text_main,\n  textTransform: 'capitalize',\n  margin: '0.25em',\n  padding: '0 1em'\n};\n\nvar CatalogList = function (_Component) {\n  _inherits(CatalogList, _Component);\n\n  function CatalogList(props, context) {\n    _classCallCheck(this, CatalogList);\n\n    var _this = _possibleConstructorReturn(this, (CatalogList.__proto__ || Object.getPrototypeOf(CatalogList)).call(this, props));\n\n    var page = props.state.catalog.page;\n    var currentCategory = context.catalog.getCategory(page);\n    var categoriesToDisplay = currentCategory.categories;\n    var elementsToDisplay = currentCategory.elements.filter(function (element) {\n      return element.info.visibility ? element.info.visibility.catalog : true;\n    });\n    _this.state = {\n      categories: currentCategory.categories,\n      elements: elementsToDisplay,\n      matchString: '',\n      matchedElements: []\n    };\n    return _this;\n  }\n\n  _createClass(CatalogList, [{\n    key: 'flattenCategories',\n    value: function flattenCategories(categories) {\n      var toRet = [];\n\n      for (var x = 0; x < categories.length; x++) {\n        var curr = categories[x];\n        toRet = toRet.concat(curr.elements);\n        if (curr.categories.length) toRet = toRet.concat(this.flattenCategories(curr.categories));\n      }\n\n      return toRet;\n    }\n  }, {\n    key: 'matcharray',\n    value: function matcharray(text) {\n      var array = this.state.elements.concat(this.flattenCategories(this.state.categories));\n      var filtered = [];\n\n      if (text != '') {\n        var regexp = new RegExp(text, 'i');\n\n        for (var i = 0; i < array.length; i++) {\n          if (regexp.test(array[i].info.title)) {\n            filtered.push(array[i]);\n          }\n        }\n      }\n\n      this.setState({\n        matchString: text,\n        matchedElements: filtered\n      });\n    }\n  }, {\n    key: 'select',\n    value: function select(element) {\n      switch (element.prototype) {\n        case 'lines':\n          this.context.linesActions.selectToolDrawingLine(element.name);\n          break;\n\n        case 'items':\n          this.context.itemsActions.selectToolDrawingItem(element.name);\n          break;\n\n        case 'holes':\n          this.context.holesActions.selectToolDrawingHole(element.name);\n          break;\n      }\n\n      this.context.projectActions.pushLastSelectedCatalogElementToHistory(element);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var page = this.props.state.catalog.page;\n      var currentCategory = this.context.catalog.getCategory(page);\n      var categoriesToDisplay = currentCategory.categories;\n      var elementsToDisplay = currentCategory.elements.filter(function (element) {\n        return element.info.visibility ? element.info.visibility.catalog : true;\n      });\n      var breadcrumbComponent = null;\n\n      if (page !== 'root') {\n        var breadcrumbsNames = [];\n        this.props.state.catalog.path.forEach(function (pathName) {\n          breadcrumbsNames.push({\n            name: _this2.context.catalog.getCategory(pathName).label,\n            action: function action() {\n              return projectActions.goBackToCatalogPage(pathName);\n            }\n          });\n        });\n        breadcrumbsNames.push({\n          name: currentCategory.label,\n          action: ''\n        });\n        breadcrumbComponent = React.createElement(CatalogBreadcrumb, {\n          names: breadcrumbsNames\n        });\n      }\n\n      var pathSize = this.props.state.catalog.path.size;\n      var turnBackButton = pathSize > 0 ? React.createElement(CatalogTurnBackPageItem, {\n        key: pathSize,\n        page: this.context.catalog.categories[this.props.state.catalog.path.get(pathSize - 1)]\n      }) : null;\n      var selectedHistory = this.props.state.get('selectedElementsHistory');\n      var selectedHistoryElements = selectedHistory.map(function (el, ind) {\n        return React.createElement('div', {\n          key: ind,\n          style: historyElementStyle,\n          title: el.name,\n          onClick: function onClick() {\n            return _this2.select(el);\n          }\n        }, el.name);\n      });\n      return React.createElement(ContentContainer, {\n        width: this.props.width,\n        height: this.props.height,\n        style: _extends({}, containerStyle, this.props.style)\n      }, React.createElement(ContentTitle, null, this.context.translator.t('Catalog')), breadcrumbComponent, React.createElement('div', {\n        style: searchContainer\n      }, React.createElement('span', {\n        style: searchText\n      }, this.context.translator.t('Search Element')), React.createElement('input', {\n        type: 'text',\n        style: searchInput,\n        onChange: function onChange(e) {\n          _this2.matcharray(e.target.value);\n        }\n      })), selectedHistory.size ? React.createElement('div', {\n        style: historyContainer\n      }, React.createElement('span', null, this.context.translator.t('Last Selected')), selectedHistoryElements) : null, React.createElement('div', {\n        style: itemsStyle\n      }, this.state.matchString === '' ? [turnBackButton, categoriesToDisplay.map(function (cat) {\n        return React.createElement(CatalogPageItem, {\n          key: cat.name,\n          page: cat,\n          oldPage: currentCategory\n        });\n      }), elementsToDisplay.map(function (elem) {\n        return React.createElement(CatalogItem, {\n          key: elem.name,\n          element: elem\n        });\n      })] : this.state.matchedElements.map(function (elem) {\n        return React.createElement(CatalogItem, {\n          key: elem.name,\n          element: elem\n        });\n      })));\n    }\n  }]);\n\n  return CatalogList;\n}(Component);\n\nexport default CatalogList;\nCatalogList.propTypes = {\n  state: PropTypes.object.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  style: PropTypes.object\n};\nCatalogList.contextTypes = {\n  catalog: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  projectActions: PropTypes.object.isRequired\n};","map":{"version":3,"sources":["/home/srihari/Desktop/Sparkplug_PandemicSparks/grid/node_modules/react-planner/es/components/catalog-view/catalog-list.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","React","Component","PropTypes","CatalogItem","CatalogBreadcrumb","CatalogPageItem","CatalogTurnBackPageItem","ContentContainer","ContentTitle","SharedStyle","containerStyle","position","width","height","backgroundColor","padding","left","overflowY","overflowX","zIndex","itemsStyle","display","gridTemplateColumns","gridGap","marginTop","searchContainer","background","border","cursor","boxShadow","borderRadius","transition","WebkitTransition","marginBottom","searchText","searchInput","margin","historyContainer","historyElementStyle","lineHeight","textAlign","PRIMARY_COLOR","alt","color","text_main","textTransform","CatalogList","_Component","context","_this","getPrototypeOf","page","state","catalog","currentCategory","getCategory","categoriesToDisplay","categories","elementsToDisplay","elements","filter","element","info","visibility","matchString","matchedElements","flattenCategories","toRet","x","curr","concat","matcharray","text","array","filtered","regexp","RegExp","test","title","push","setState","select","linesActions","selectToolDrawingLine","name","itemsActions","selectToolDrawingItem","holesActions","selectToolDrawingHole","projectActions","pushLastSelectedCatalogElementToHistory","render","_this2","breadcrumbComponent","breadcrumbsNames","path","forEach","pathName","label","action","goBackToCatalogPage","createElement","names","pathSize","size","turnBackButton","get","selectedHistory","selectedHistoryElements","map","el","ind","style","onClick","translator","t","type","onChange","e","cat","oldPage","elem","propTypes","object","isRequired","number","contextTypes"],"mappings":"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","sourcesContent":["var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport CatalogItem from './catalog-item';\nimport CatalogBreadcrumb from './catalog-breadcrumb';\nimport CatalogPageItem from './catalog-page-item';\nimport CatalogTurnBackPageItem from './catalog-turn-back-page-item';\nimport ContentContainer from '../style/content-container';\nimport ContentTitle from '../style/content-title';\nimport * as SharedStyle from '../../shared-style';\n\nvar containerStyle = {\n  position: 'fixed',\n  width: 'calc( 100% - 51px)',\n  height: 'calc( 100% - 20px)',\n  backgroundColor: '#FFF',\n  padding: '1em',\n  left: 50,\n  overflowY: 'auto',\n  overflowX: 'hidden',\n  zIndex: 10\n};\n\nvar itemsStyle = {\n  display: 'grid',\n  gridTemplateColumns: 'repeat(auto-fit, minmax(14em, 1fr))',\n  gridGap: '10px',\n  marginTop: '1em'\n};\n\nvar searchContainer = {\n  width: '100%',\n  height: '3em',\n  padding: '0.625em',\n  background: '#f7f7f9',\n  border: '1px solid #e1e1e8',\n  cursor: 'pointer',\n  position: 'relative',\n  boxShadow: '0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)',\n  borderRadius: '2px',\n  transition: 'all .2s ease-in-out',\n  WebkitTransition: 'all .2s ease-in-out',\n  marginBottom: '1em'\n};\n\nvar searchText = {\n  width: '8em',\n  display: 'inline-block'\n};\n\nvar searchInput = {\n  width: 'calc( 100% - 10em )',\n  height: '2em',\n  margin: '0',\n  padding: '0 1em',\n  border: '1px solid #EEE'\n};\n\nvar historyContainer = _extends({}, searchContainer, {\n  padding: '0.2em 0.625em'\n});\n\nvar historyElementStyle = {\n  width: 'auto',\n  height: '2em',\n  lineHeight: '2em',\n  textAlign: 'center',\n  borderRadius: '1em',\n  display: 'inline-block',\n  cursor: 'pointer',\n  backgroundColor: SharedStyle.PRIMARY_COLOR.alt,\n  color: SharedStyle.PRIMARY_COLOR.text_main,\n  textTransform: 'capitalize',\n  margin: '0.25em',\n  padding: '0 1em'\n};\n\nvar CatalogList = function (_Component) {\n  _inherits(CatalogList, _Component);\n\n  function CatalogList(props, context) {\n    _classCallCheck(this, CatalogList);\n\n    var _this = _possibleConstructorReturn(this, (CatalogList.__proto__ || Object.getPrototypeOf(CatalogList)).call(this, props));\n\n    var page = props.state.catalog.page;\n    var currentCategory = context.catalog.getCategory(page);\n    var categoriesToDisplay = currentCategory.categories;\n    var elementsToDisplay = currentCategory.elements.filter(function (element) {\n      return element.info.visibility ? element.info.visibility.catalog : true;\n    });\n\n    _this.state = {\n      categories: currentCategory.categories,\n      elements: elementsToDisplay,\n      matchString: '',\n      matchedElements: []\n    };\n    return _this;\n  }\n\n  _createClass(CatalogList, [{\n    key: 'flattenCategories',\n    value: function flattenCategories(categories) {\n      var toRet = [];\n\n      for (var x = 0; x < categories.length; x++) {\n        var curr = categories[x];\n        toRet = toRet.concat(curr.elements);\n        if (curr.categories.length) toRet = toRet.concat(this.flattenCategories(curr.categories));\n      }\n\n      return toRet;\n    }\n  }, {\n    key: 'matcharray',\n    value: function matcharray(text) {\n\n      var array = this.state.elements.concat(this.flattenCategories(this.state.categories));\n\n      var filtered = [];\n\n      if (text != '') {\n        var regexp = new RegExp(text, 'i');\n        for (var i = 0; i < array.length; i++) {\n          if (regexp.test(array[i].info.title)) {\n            filtered.push(array[i]);\n          }\n        }\n      }\n\n      this.setState({\n        matchString: text,\n        matchedElements: filtered\n      });\n    }\n  }, {\n    key: 'select',\n    value: function select(element) {\n\n      switch (element.prototype) {\n        case 'lines':\n          this.context.linesActions.selectToolDrawingLine(element.name);\n          break;\n        case 'items':\n          this.context.itemsActions.selectToolDrawingItem(element.name);\n          break;\n        case 'holes':\n          this.context.holesActions.selectToolDrawingHole(element.name);\n          break;\n      }\n\n      this.context.projectActions.pushLastSelectedCatalogElementToHistory(element);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var page = this.props.state.catalog.page;\n      var currentCategory = this.context.catalog.getCategory(page);\n      var categoriesToDisplay = currentCategory.categories;\n      var elementsToDisplay = currentCategory.elements.filter(function (element) {\n        return element.info.visibility ? element.info.visibility.catalog : true;\n      });\n\n      var breadcrumbComponent = null;\n\n      if (page !== 'root') {\n\n        var breadcrumbsNames = [];\n\n        this.props.state.catalog.path.forEach(function (pathName) {\n          breadcrumbsNames.push({\n            name: _this2.context.catalog.getCategory(pathName).label,\n            action: function action() {\n              return projectActions.goBackToCatalogPage(pathName);\n            }\n          });\n        });\n\n        breadcrumbsNames.push({ name: currentCategory.label, action: '' });\n\n        breadcrumbComponent = React.createElement(CatalogBreadcrumb, { names: breadcrumbsNames });\n      }\n\n      var pathSize = this.props.state.catalog.path.size;\n\n      var turnBackButton = pathSize > 0 ? React.createElement(CatalogTurnBackPageItem, { key: pathSize, page: this.context.catalog.categories[this.props.state.catalog.path.get(pathSize - 1)] }) : null;\n\n      var selectedHistory = this.props.state.get('selectedElementsHistory');\n      var selectedHistoryElements = selectedHistory.map(function (el, ind) {\n        return React.createElement(\n          'div',\n          { key: ind, style: historyElementStyle, title: el.name, onClick: function onClick() {\n              return _this2.select(el);\n            } },\n          el.name\n        );\n      });\n\n      return React.createElement(\n        ContentContainer,\n        { width: this.props.width, height: this.props.height, style: _extends({}, containerStyle, this.props.style) },\n        React.createElement(\n          ContentTitle,\n          null,\n          this.context.translator.t('Catalog')\n        ),\n        breadcrumbComponent,\n        React.createElement(\n          'div',\n          { style: searchContainer },\n          React.createElement(\n            'span',\n            { style: searchText },\n            this.context.translator.t('Search Element')\n          ),\n          React.createElement('input', { type: 'text', style: searchInput, onChange: function onChange(e) {\n              _this2.matcharray(e.target.value);\n            } })\n        ),\n        selectedHistory.size ? React.createElement(\n          'div',\n          { style: historyContainer },\n          React.createElement(\n            'span',\n            null,\n            this.context.translator.t('Last Selected')\n          ),\n          selectedHistoryElements\n        ) : null,\n        React.createElement(\n          'div',\n          { style: itemsStyle },\n          this.state.matchString === '' ? [turnBackButton, categoriesToDisplay.map(function (cat) {\n            return React.createElement(CatalogPageItem, { key: cat.name, page: cat, oldPage: currentCategory });\n          }), elementsToDisplay.map(function (elem) {\n            return React.createElement(CatalogItem, { key: elem.name, element: elem });\n          })] : this.state.matchedElements.map(function (elem) {\n            return React.createElement(CatalogItem, { key: elem.name, element: elem });\n          })\n        )\n      );\n    }\n  }]);\n\n  return CatalogList;\n}(Component);\n\nexport default CatalogList;\n\n\nCatalogList.propTypes = {\n  state: PropTypes.object.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  style: PropTypes.object\n};\n\nCatalogList.contextTypes = {\n  catalog: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  projectActions: PropTypes.object.isRequired\n};"]},"metadata":{},"sourceType":"module"}