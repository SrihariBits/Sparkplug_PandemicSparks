import React from 'react';
import PropTypes from 'prop-types';
import { FaFolderOpen as IconLoad } from 'react-icons/fa';
import ToolbarButton from './toolbar-button';
import { browserUpload } from '../../utils/browser';

export default function ToolbarLoadButton(_ref, _ref2) {
  var state = _ref.state;
  var translator = _ref2.translator,
      projectActions = _ref2.projectActions;


  var loadProjectFromFile = function loadProjectFromFile(event) {
    event.preventDefault();
    fetch('http://127.0.0.1:5000/warehouseLoad/', {
            method: "get",
            headers: { 'Content-Type': 'application/json' }
        })
        .then(res => res.json())
        .then(data => {
            fetch('http://127.0.0.1:5000/pathmaker/', {
              method: "post",
              headers: { 'Content-Type': 'application/json' }
            })
            .then(res => res.json())
            .then(data2 => {
              var temp1=JSON.parse(data);
              var justforgag={...temp1.layers,"layer2":data2.data};
              temp1.layers=justforgag;
              console.log(justforgag);
              projectActions.loadProject(temp1);
            })
        });
  };

  return React.createElement(
    ToolbarButton,
    { active: false, tooltip: translator.t("Load project"), onClick: loadProjectFromFile },
    React.createElement(IconLoad, null)
  );
}

ToolbarLoadButton.propTypes = {
  state: PropTypes.object.isRequired
};

ToolbarLoadButton.contextTypes = {
  projectActions: PropTypes.object.isRequired,
  translator: PropTypes.object.isRequired
};